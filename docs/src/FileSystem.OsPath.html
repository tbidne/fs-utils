<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE QuasiQuotes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-redundant-constraints #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-comment">-- | Provides utilities for working with 'OsPath'.</span><span>
</span><span id="line-5"></span><span class="hs-comment">--</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-7"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="FileSystem.OsPath.html"><span class="hs-identifier">FileSystem.OsPath</span></a></span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Types</span></span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><span class="hs-identifier">OsPath</span></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Encoding</span></span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Total</span></span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#encode"><span class="hs-identifier">encode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#encodeLenient"><span class="hs-identifier">encodeLenient</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Partial</span></span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#encodeThrowM"><span class="hs-identifier">encodeThrowM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#encodeFail"><span class="hs-identifier">encodeFail</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#unsafeEncode"><span class="hs-identifier">unsafeEncode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Encoding + Validation</span></span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Total</span></span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><span class="hs-identifier">osp</span></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#ospPathSep"><span class="hs-identifier">ospPathSep</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#encodeValid"><span class="hs-identifier">encodeValid</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#encodeValidLenient"><span class="hs-identifier">encodeValidLenient</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Partial</span></span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#encodeValidThrowM"><span class="hs-identifier">encodeValidThrowM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#encodeValidFail"><span class="hs-identifier">encodeValidFail</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#unsafeEncodeValid"><span class="hs-identifier">unsafeEncodeValid</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Decoding</span></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Total</span></span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#decode"><span class="hs-identifier">decode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#decodeLenient"><span class="hs-identifier">decodeLenient</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#decodeDisplayEx"><span class="hs-identifier">decodeDisplayEx</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#decodeShow"><span class="hs-identifier">decodeShow</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Partial</span></span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#decodeThrowM"><span class="hs-identifier">decodeThrowM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#decodeFail"><span class="hs-identifier">decodeFail</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#unsafeDecode"><span class="hs-identifier">unsafeDecode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><span class="hs-comment">-- * OsString</span></span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#toOsString"><span class="hs-identifier">toOsString</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#fromOsString"><span class="hs-identifier">fromOsString</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#fromOsStringThrowM"><span class="hs-identifier">fromOsStringThrowM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#fromOsStringFail"><span class="hs-identifier">fromOsStringFail</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#unsafeFromOsString"><span class="hs-identifier">unsafeFromOsString</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#reallyUnsafeFromOsString"><span class="hs-identifier">reallyUnsafeFromOsString</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Functions</span></span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><span class="hs-operator">(&lt;/&gt;)</span></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><span class="hs-operator">(&lt;.&gt;)</span></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><span class="hs-operator">(-&lt;.&gt;)</span></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Legacy</span></span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#%3C%2F%3E%21"><span class="hs-operator">(&lt;/&gt;!)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#%21%3C%2F%3E"><span class="hs-operator">(!&lt;/&gt;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#combineFilePaths"><span class="hs-identifier">combineFilePaths</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Errors</span></span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><span class="hs-identifier">EncodingException</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Tildes</span></span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#toTildePrefixState"><span class="hs-identifier">toTildePrefixState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#TildePrefixState"><span class="hs-identifier">TildePrefixState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#OsPathOrEmpty"><span class="hs-identifier">OsPathOrEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#TildeException"><span class="hs-identifier">TildeException</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><a href="FileSystem.OsPath.html#containsTildePrefix"><span class="hs-identifier">containsTildePrefix</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">where</span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Category</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&gt;&gt;&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.DeepSeq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NFData</span></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Exception</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">displayException</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Catch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadThrow</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">throwM</span></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">isJust</span></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="FileSystem.Internal.html"><span class="hs-identifier">FileSystem.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FileSystem.Internal.html#TildePrefixes"><span class="hs-identifier">TildePrefixes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="FileSystem.Internal.html"><span class="hs-identifier">FileSystem.Internal</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Internal</span></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Stack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HasCallStack</span></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Language.Haskell.TH.Quote</span></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">QuasiQuoter</span></span><span>
</span><span id="line-89"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">QuasiQuoter</span></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>        </span><span class="annot"><span class="hs-identifier">quoteDec</span></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>        </span><span class="annot"><span class="hs-identifier">quoteExp</span></span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>        </span><span class="annot"><span class="hs-identifier">quotePat</span></span><span class="hs-special">,</span><span>
</span><span id="line-93"></span><span>        </span><span class="annot"><span class="hs-identifier">quoteType</span></span><span>
</span><span id="line-94"></span><span>      </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.FilePath</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">FP</span></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.OsPath</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">OsPath</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">osp</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(-&lt;.&gt;)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(&lt;.&gt;)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(&lt;/&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.OsPath</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OsP</span></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.OsPath.Encoding</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">EncodingException</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">EncodingError</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.OsString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">OsString</span></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-comment">-- NOTE: -Wno-redundant-constraints is because the HasCallStack is redundant</span><span>
</span><span id="line-103"></span><span class="hs-comment">-- on some of these functions when the exceptions library is too old.</span><span>
</span><span id="line-104"></span><span class="hs-comment">-- Disabling the warning is easier than trying to get it right with cpp.</span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="hs-comment">-- | Like 'osp', except it runs paths through a &quot;replace function&quot; first.</span><span>
</span><span id="line-107"></span><span class="hs-comment">-- On unix, replaces @\\@ with @/@. On windows, does the opposite.</span><span>
</span><span id="line-108"></span><span class="hs-comment">--</span><span>
</span><span id="line-109"></span><span class="hs-comment">-- This is convenient for writing paths in a platform-agnostic way i.e. we</span><span>
</span><span id="line-110"></span><span class="hs-comment">-- are expecting a path</span><span>
</span><span id="line-111"></span><span class="hs-comment">--</span><span>
</span><span id="line-112"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-113"></span><span class="hs-comment">--   &quot;path\/to\/foo&quot; -- unix</span><span>
</span><span id="line-114"></span><span class="hs-comment">--   &quot;path\\to\\foo&quot; -- windows</span><span>
</span><span id="line-115"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-116"></span><span class="hs-comment">--</span><span>
</span><span id="line-117"></span><span class="hs-comment">-- The normal way to handle this would be to use the combine function '(&lt;/&gt;)'</span><span>
</span><span id="line-118"></span><span class="hs-comment">-- i.e.</span><span>
</span><span id="line-119"></span><span class="hs-comment">--</span><span>
</span><span id="line-120"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-121"></span><span class="hs-comment">--   [osp|path|] '&lt;/&gt;' [osp|to|] '&lt;/&gt;' [osp|foo|]</span><span>
</span><span id="line-122"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-123"></span><span class="hs-comment">--</span><span>
</span><span id="line-124"></span><span class="hs-comment">-- This can be quite cumbersome for long paths, so we provide this alternative,</span><span>
</span><span id="line-125"></span><span class="hs-comment">-- allowing:</span><span>
</span><span id="line-126"></span><span class="hs-comment">--</span><span>
</span><span id="line-127"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-128"></span><span class="hs-comment">--   [ospPathSep|path\/to\/foo]</span><span>
</span><span id="line-129"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-130"></span><span class="hs-comment">--</span><span>
</span><span id="line-131"></span><span class="hs-comment">-- Which will automatically convert slashes.</span><span>
</span><span id="line-132"></span><span class="annot"><a href="FileSystem.OsPath.html#ospPathSep"><span class="hs-identifier hs-type">ospPathSep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">QuasiQuoter</span></span><span>
</span><span id="line-133"></span><span id="ospPathSep"><span class="annot"><span class="annottext">ospPathSep :: QuasiQuoter
</span><a href="FileSystem.OsPath.html#ospPathSep"><span class="hs-identifier hs-var hs-var">ospPathSep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-134"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">QuasiQuoter</span></span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">quoteExp :: String -&gt; Q Exp
</span><span class="hs-identifier hs-var">quoteExp</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QuasiQuoter
</span><span class="hs-identifier hs-var">osp</span></span><span class="hs-operator">.</span><span class="hs-identifier">quoteExp</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Q Exp) -&gt; (String -&gt; String) -&gt; String -&gt; Q Exp
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="FileSystem.Internal.html#replaceSlashes"><span class="hs-identifier hs-var">Internal.replaceSlashes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-136"></span><span>      </span><span class="annot"><span class="annottext">quotePat :: String -&gt; Q Pat
</span><span class="hs-identifier hs-var">quotePat</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QuasiQuoter
</span><span class="hs-identifier hs-var">osp</span></span><span class="hs-operator">.</span><span class="hs-identifier">quotePat</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Q Pat) -&gt; (String -&gt; String) -&gt; String -&gt; Q Pat
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="FileSystem.Internal.html#replaceSlashes"><span class="hs-identifier hs-var">Internal.replaceSlashes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-137"></span><span>      </span><span class="annot"><span class="annottext">quoteType :: String -&gt; Q Type
</span><span class="hs-identifier hs-var">quoteType</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QuasiQuoter
</span><span class="hs-identifier hs-var">osp</span></span><span class="hs-operator">.</span><span class="hs-identifier">quoteType</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Q Type) -&gt; (String -&gt; String) -&gt; String -&gt; Q Type
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="FileSystem.Internal.html#replaceSlashes"><span class="hs-identifier hs-var">Internal.replaceSlashes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-138"></span><span>      </span><span class="annot"><span class="annottext">quoteDec :: String -&gt; Q [Dec]
</span><span class="hs-identifier hs-var">quoteDec</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QuasiQuoter
</span><span class="hs-identifier hs-var">osp</span></span><span class="hs-operator">.</span><span class="hs-identifier">quoteDec</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Q [Dec]) -&gt; (String -&gt; String) -&gt; String -&gt; Q [Dec]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
</span><a href="FileSystem.Internal.html#replaceSlashes"><span class="hs-identifier hs-var">Internal.replaceSlashes</span></a></span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-comment">-- | Encodes a 'FilePath' to an 'OsPath'. This is a pure version of filepath's</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- 'OsP.encodeUtf' that returns the 'EncodingException' in the event of an</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- error.</span><span>
</span><span id="line-144"></span><span class="hs-comment">--</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-146"></span><span class="annot"><a href="FileSystem.OsPath.html#encode"><span class="hs-identifier hs-type">encode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncodingException</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span>
</span><span id="line-147"></span><span id="encode"><span class="annot"><span class="annottext">encode :: String -&gt; Either EncodingException OsString
</span><a href="FileSystem.OsPath.html#encode"><span class="hs-identifier hs-var hs-var">encode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TextEncoding
-&gt; TextEncoding -&gt; String -&gt; Either EncodingException OsString
</span><span class="hs-identifier hs-var">OsP.encodeWith</span></span><span> </span><span class="annot"><span class="annottext">TextEncoding
</span><a href="#local-6989586621679087015"><span class="hs-identifier hs-var">utf8Encoder</span></a></span><span> </span><span class="annot"><span class="annottext">TextEncoding
</span><a href="#local-6989586621679087016"><span class="hs-identifier hs-var">utf16Encoder</span></a></span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679087015"><span class="annot"><span class="annottext">TextEncoding
</span><a href="#local-6989586621679087015"><span class="hs-identifier hs-var">utf8Encoder</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679087016"><span class="annot"><span class="annottext">TextEncoding
</span><a href="#local-6989586621679087016"><span class="hs-identifier hs-var">utf16Encoder</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TextEncoding, TextEncoding)
</span><a href="FileSystem.Internal.html#utfEncodings"><span class="hs-identifier hs-var">Internal.utfEncodings</span></a></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-comment">-- | Total conversion from 'FilePath' to 'OsPath', replacing encode failures</span><span>
</span><span id="line-152"></span><span class="hs-comment">-- with the closest visual match.</span><span>
</span><span id="line-153"></span><span class="hs-comment">--</span><span>
</span><span id="line-154"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-155"></span><span class="annot"><a href="FileSystem.OsPath.html#encodeLenient"><span class="hs-identifier hs-type">encodeLenient</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span>
</span><span id="line-156"></span><span id="encodeLenient"><span class="annot"><span class="annottext">encodeLenient :: String -&gt; OsString
</span><a href="FileSystem.OsPath.html#encodeLenient"><span class="hs-identifier hs-var hs-var">encodeLenient</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either EncodingException OsString -&gt; OsString
forall {a}. Either EncodingException a -&gt; a
</span><a href="#local-6989586621679087018"><span class="hs-identifier hs-var">elimEx</span></a></span><span> </span><span class="annot"><span class="annottext">(Either EncodingException OsString -&gt; OsString)
-&gt; (String -&gt; Either EncodingException OsString)
-&gt; String
-&gt; OsString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TextEncoding
-&gt; TextEncoding -&gt; String -&gt; Either EncodingException OsString
</span><span class="hs-identifier hs-var">OsP.encodeWith</span></span><span> </span><span class="annot"><span class="annottext">TextEncoding
</span><a href="#local-6989586621679087019"><span class="hs-identifier hs-var">uft8Encoding</span></a></span><span> </span><span class="annot"><span class="annottext">TextEncoding
</span><a href="#local-6989586621679087020"><span class="hs-identifier hs-var">utf16Encoding</span></a></span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679087019"><span class="annot"><span class="annottext">TextEncoding
</span><a href="#local-6989586621679087019"><span class="hs-identifier hs-var">uft8Encoding</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679087020"><span class="annot"><span class="annottext">TextEncoding
</span><a href="#local-6989586621679087020"><span class="hs-identifier hs-var">utf16Encoding</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679087018"><span class="annot"><span class="annottext">Either EncodingException a -&gt; a
</span><a href="#local-6989586621679087018"><span class="hs-identifier hs-var">elimEx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TextEncoding, TextEncoding, Either EncodingException a -&gt; a)
forall a.
(TextEncoding, TextEncoding, Either EncodingException a -&gt; a)
</span><a href="FileSystem.Internal.html#utfEncodingsLenient"><span class="hs-identifier hs-var">Internal.utfEncodingsLenient</span></a></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span class="hs-comment">-- | 'encode' that __also__ checks 'OsP.isValid' i.e. 'encode'</span><span>
</span><span id="line-161"></span><span class="hs-comment">-- only succeeds if the 'FilePath' can be encoded /and/ passes expected</span><span>
</span><span id="line-162"></span><span class="hs-comment">-- invariants.</span><span>
</span><span id="line-163"></span><span class="hs-comment">--</span><span>
</span><span id="line-164"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-165"></span><span class="annot"><a href="FileSystem.OsPath.html#encodeValid"><span class="hs-identifier hs-type">encodeValid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncodingException</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span>
</span><span id="line-166"></span><span id="encodeValid"><span class="annot"><span class="annottext">encodeValid :: String -&gt; Either EncodingException OsString
</span><a href="FileSystem.OsPath.html#encodeValid"><span class="hs-identifier hs-var hs-var">encodeValid</span></a></span></span><span> </span><span id="local-6989586621679087023"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087023"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either EncodingException OsString
</span><a href="FileSystem.OsPath.html#encode"><span class="hs-identifier hs-var">encode</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087023"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-167"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679087024"><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087024"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EncodingException -&gt; Either EncodingException OsString
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087024"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-168"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679087025"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087025"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; Bool
</span><span class="hs-identifier hs-var">OsP.isValid</span></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087025"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-170"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; Either EncodingException OsString
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087025"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-171"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">EncodingException -&gt; Either EncodingException OsString
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(EncodingException -&gt; Either EncodingException OsString)
-&gt; EncodingException -&gt; Either EncodingException OsString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe Word8 -&gt; EncodingException
</span><span class="hs-identifier hs-var">EncodingError</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; OsString -&gt; String
</span><a href="FileSystem.OsPath.html#validFpErr"><span class="hs-identifier hs-var">validFpErr</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087023"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087025"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Word8
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span class="hs-comment">-- | Total conversion from 'FilePath' to 'OsPath', replacing encode failures</span><span>
</span><span id="line-174"></span><span class="hs-comment">-- with the closest visual match. If the result is not valid, makes it valid.</span><span>
</span><span id="line-175"></span><span class="hs-comment">--</span><span>
</span><span id="line-176"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-177"></span><span class="annot"><a href="FileSystem.OsPath.html#encodeValidLenient"><span class="hs-identifier hs-type">encodeValidLenient</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span>
</span><span id="line-178"></span><span id="encodeValidLenient"><span class="annot"><span class="annottext">encodeValidLenient :: String -&gt; OsString
</span><a href="FileSystem.OsPath.html#encodeValidLenient"><span class="hs-identifier hs-var hs-var">encodeValidLenient</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; OsString
</span><span class="hs-identifier hs-var">OsP.makeValid</span></span><span> </span><span class="annot"><span class="annottext">(OsString -&gt; OsString)
-&gt; (String -&gt; OsString) -&gt; String -&gt; OsString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; OsString
</span><a href="FileSystem.OsPath.html#encodeLenient"><span class="hs-identifier hs-var">encodeLenient</span></a></span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span class="hs-comment">-- | 'encode' that throws 'EncodingException'.</span><span>
</span><span id="line-181"></span><span class="hs-comment">--</span><span>
</span><span id="line-182"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-183"></span><span id="local-6989586621679086865"><span class="annot"><a href="FileSystem.OsPath.html#encodeThrowM"><span class="hs-identifier hs-type">encodeThrowM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679086865"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086865"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span></span><span>
</span><span id="line-184"></span><span id="encodeThrowM"><span class="annot"><span class="annottext">encodeThrowM :: forall (m :: * -&gt; *).
(HasCallStack, MonadThrow m) =&gt;
String -&gt; m OsString
</span><a href="FileSystem.OsPath.html#encodeThrowM"><span class="hs-identifier hs-var hs-var">encodeThrowM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-185"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Either EncodingException OsString
</span><a href="FileSystem.OsPath.html#encode"><span class="hs-identifier hs-var">encode</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either EncodingException OsString)
-&gt; (Either EncodingException OsString -&gt; m OsString)
-&gt; String
-&gt; m OsString
forall {k} (cat :: k -&gt; k -&gt; *) (a :: k) (b :: k) (c :: k).
Category cat =&gt;
cat a b -&gt; cat b c -&gt; cat a c
</span><span class="hs-operator hs-var">&gt;&gt;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679087041"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087041"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; m OsString
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087041"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-187"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679087042"><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087042"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EncodingException -&gt; m OsString
forall e a. (HasCallStack, Exception e) =&gt; e -&gt; m a
forall (m :: * -&gt; *) e a.
(MonadThrow m, HasCallStack, Exception e) =&gt;
e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087042"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-188"></span><span class="hs-pragma">{-# INLINEABLE</span><span> </span><span class="annot"><a href="FileSystem.OsPath.html#encodeThrowM"><span class="hs-pragma hs-type">encodeThrowM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span class="hs-comment">-- | 'encodeValid' that throws 'EncodingException'.</span><span>
</span><span id="line-191"></span><span class="hs-comment">--</span><span>
</span><span id="line-192"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-193"></span><span id="local-6989586621679087043"><span class="annot"><a href="FileSystem.OsPath.html#encodeValidThrowM"><span class="hs-identifier hs-type">encodeValidThrowM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679087043"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679087043"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span></span><span>
</span><span id="line-194"></span><span id="encodeValidThrowM"><span class="annot"><span class="annottext">encodeValidThrowM :: forall (m :: * -&gt; *).
(HasCallStack, MonadThrow m) =&gt;
String -&gt; m OsString
</span><a href="FileSystem.OsPath.html#encodeValidThrowM"><span class="hs-identifier hs-var hs-var">encodeValidThrowM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-195"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Either EncodingException OsString
</span><a href="FileSystem.OsPath.html#encodeValid"><span class="hs-identifier hs-var">encodeValid</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either EncodingException OsString)
-&gt; (Either EncodingException OsString -&gt; m OsString)
-&gt; String
-&gt; m OsString
forall {k} (cat :: k -&gt; k -&gt; *) (a :: k) (b :: k) (c :: k).
Category cat =&gt;
cat a b -&gt; cat b c -&gt; cat a c
</span><span class="hs-operator hs-var">&gt;&gt;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-196"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679087054"><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087054"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EncodingException -&gt; m OsString
forall e a. (HasCallStack, Exception e) =&gt; e -&gt; m a
forall (m :: * -&gt; *) e a.
(MonadThrow m, HasCallStack, Exception e) =&gt;
e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087054"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-197"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679087055"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087055"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; m OsString
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087055"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-198"></span><span class="hs-pragma">{-# INLINEABLE</span><span> </span><span class="annot"><a href="FileSystem.OsPath.html#encodeValidThrowM"><span class="hs-pragma hs-type">encodeValidThrowM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="hs-comment">-- | 'encodeThrowM' with 'MonadFail'.</span><span>
</span><span id="line-201"></span><span class="hs-comment">--</span><span>
</span><span id="line-202"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-203"></span><span id="local-6989586621679086881"><span class="annot"><a href="FileSystem.OsPath.html#encodeFail"><span class="hs-identifier hs-type">encodeFail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadFail</span></span><span> </span><span class="annot"><a href="#local-6989586621679086881"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086881"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span></span><span>
</span><span id="line-204"></span><span id="encodeFail"><span class="annot"><span class="annottext">encodeFail :: forall (m :: * -&gt; *).
(HasCallStack, MonadFail m) =&gt;
String -&gt; m OsString
</span><a href="FileSystem.OsPath.html#encodeFail"><span class="hs-identifier hs-var hs-var">encodeFail</span></a></span></span><span> </span><span id="local-6989586621679087064"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087064"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either EncodingException OsString
</span><a href="FileSystem.OsPath.html#encode"><span class="hs-identifier hs-var">encode</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087064"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-205"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679087065"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087065"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; m OsString
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087065"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-206"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679087066"><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087066"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m OsString
forall a. String -&gt; m a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EncodingException -&gt; String
forall e. Exception e =&gt; e -&gt; String
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087066"><span class="hs-identifier hs-var">ex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span class="hs-pragma">{-# INLINEABLE</span><span> </span><span class="annot"><a href="FileSystem.OsPath.html#encodeFail"><span class="hs-pragma hs-type">encodeFail</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-comment">-- | 'encodeValid' with 'MonadFail'.</span><span>
</span><span id="line-210"></span><span class="hs-comment">--</span><span>
</span><span id="line-211"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-212"></span><span id="local-6989586621679087067"><span class="annot"><a href="FileSystem.OsPath.html#encodeValidFail"><span class="hs-identifier hs-type">encodeValidFail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadFail</span></span><span> </span><span class="annot"><a href="#local-6989586621679087067"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679087067"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span></span><span>
</span><span id="line-213"></span><span id="encodeValidFail"><span class="annot"><span class="annottext">encodeValidFail :: forall (m :: * -&gt; *).
(HasCallStack, MonadFail m) =&gt;
String -&gt; m OsString
</span><a href="FileSystem.OsPath.html#encodeValidFail"><span class="hs-identifier hs-var hs-var">encodeValidFail</span></a></span></span><span> </span><span id="local-6989586621679087075"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087075"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either EncodingException OsString
</span><a href="FileSystem.OsPath.html#encodeValid"><span class="hs-identifier hs-var">encodeValid</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087075"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-214"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679087076"><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087076"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m OsString
forall a. String -&gt; m a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EncodingException -&gt; String
forall e. Exception e =&gt; e -&gt; String
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087076"><span class="hs-identifier hs-var">ex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679087077"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087077"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; m OsString
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087077"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-216"></span><span class="hs-pragma">{-# INLINEABLE</span><span> </span><span class="annot"><a href="FileSystem.OsPath.html#encodeValidFail"><span class="hs-pragma hs-type">encodeValidFail</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span class="hs-comment">-- | Unsafely converts a 'FilePath' to 'OsPath' falling back to 'error'.</span><span>
</span><span id="line-219"></span><span class="hs-comment">--</span><span>
</span><span id="line-220"></span><span class="hs-comment">-- __WARNING: Partial__</span><span>
</span><span id="line-221"></span><span class="hs-comment">--</span><span>
</span><span id="line-222"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-223"></span><span class="annot"><a href="FileSystem.OsPath.html#unsafeEncode"><span class="hs-identifier hs-type">unsafeEncode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span>
</span><span id="line-224"></span><span id="unsafeEncode"><span class="annot"><span class="annottext">unsafeEncode :: HasCallStack =&gt; String -&gt; OsString
</span><a href="FileSystem.OsPath.html#unsafeEncode"><span class="hs-identifier hs-var hs-var">unsafeEncode</span></a></span></span><span> </span><span id="local-6989586621679087083"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087083"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either EncodingException OsString
</span><a href="FileSystem.OsPath.html#encode"><span class="hs-identifier hs-var">encode</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087083"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-225"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679087084"><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087084"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; OsString
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EncodingException -&gt; String
forall e. Exception e =&gt; e -&gt; String
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087084"><span class="hs-identifier hs-var">ex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679087085"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087085"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087085"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-comment">-- | Unsafely converts a 'FilePath' to 'OsPath' falling back to 'error'.</span><span>
</span><span id="line-229"></span><span class="hs-comment">--</span><span>
</span><span id="line-230"></span><span class="hs-comment">-- __WARNING: Partial__</span><span>
</span><span id="line-231"></span><span class="hs-comment">--</span><span>
</span><span id="line-232"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-233"></span><span class="annot"><a href="FileSystem.OsPath.html#unsafeEncodeValid"><span class="hs-identifier hs-type">unsafeEncodeValid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span>
</span><span id="line-234"></span><span id="unsafeEncodeValid"><span class="annot"><span class="annottext">unsafeEncodeValid :: HasCallStack =&gt; String -&gt; OsString
</span><a href="FileSystem.OsPath.html#unsafeEncodeValid"><span class="hs-identifier hs-var hs-var">unsafeEncodeValid</span></a></span></span><span> </span><span id="local-6989586621679087090"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087090"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either EncodingException OsString
</span><a href="FileSystem.OsPath.html#encodeValid"><span class="hs-identifier hs-var">encodeValid</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087090"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-235"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679087091"><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087091"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; OsString
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EncodingException -&gt; String
forall e. Exception e =&gt; e -&gt; String
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087091"><span class="hs-identifier hs-var">ex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679087092"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087092"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087092"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span class="hs-comment">-- | Decodes an 'OsPath' to a 'FilePath'. This is a pure version of filepath's</span><span>
</span><span id="line-239"></span><span class="hs-comment">-- 'OsP.decodeUtf'.</span><span>
</span><span id="line-240"></span><span class="hs-comment">--</span><span>
</span><span id="line-241"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-242"></span><span class="annot"><a href="FileSystem.OsPath.html#decode"><span class="hs-identifier hs-type">decode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncodingException</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-243"></span><span id="decode"><span class="annot"><span class="annottext">decode :: OsString -&gt; Either EncodingException String
</span><a href="FileSystem.OsPath.html#decode"><span class="hs-identifier hs-var hs-var">decode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TextEncoding
-&gt; TextEncoding -&gt; OsString -&gt; Either EncodingException String
</span><span class="hs-identifier hs-var">OsP.decodeWith</span></span><span> </span><span class="annot"><span class="annottext">TextEncoding
</span><a href="#local-6989586621679087095"><span class="hs-identifier hs-var">utf8Encoder</span></a></span><span> </span><span class="annot"><span class="annottext">TextEncoding
</span><a href="#local-6989586621679087096"><span class="hs-identifier hs-var">utf16Encoder</span></a></span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679087095"><span class="annot"><span class="annottext">TextEncoding
</span><a href="#local-6989586621679087095"><span class="hs-identifier hs-var">utf8Encoder</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679087096"><span class="annot"><span class="annottext">TextEncoding
</span><a href="#local-6989586621679087096"><span class="hs-identifier hs-var">utf16Encoder</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TextEncoding, TextEncoding)
</span><a href="FileSystem.Internal.html#utfEncodings"><span class="hs-identifier hs-var">Internal.utfEncodings</span></a></span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="hs-comment">-- | Total conversion from 'OsPath' to 'FilePath', replacing decode failures</span><span>
</span><span id="line-248"></span><span class="hs-comment">-- with the closest visual match.</span><span>
</span><span id="line-249"></span><span class="hs-comment">--</span><span>
</span><span id="line-250"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-251"></span><span class="annot"><a href="FileSystem.OsPath.html#decodeLenient"><span class="hs-identifier hs-type">decodeLenient</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-252"></span><span id="decodeLenient"><span class="annot"><span class="annottext">decodeLenient :: OsString -&gt; String
</span><a href="FileSystem.OsPath.html#decodeLenient"><span class="hs-identifier hs-var hs-var">decodeLenient</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either EncodingException String -&gt; String
forall {a}. Either EncodingException a -&gt; a
</span><a href="#local-6989586621679087097"><span class="hs-identifier hs-var">elimEx</span></a></span><span> </span><span class="annot"><span class="annottext">(Either EncodingException String -&gt; String)
-&gt; (OsString -&gt; Either EncodingException String)
-&gt; OsString
-&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TextEncoding
-&gt; TextEncoding -&gt; OsString -&gt; Either EncodingException String
</span><span class="hs-identifier hs-var">OsP.decodeWith</span></span><span> </span><span class="annot"><span class="annottext">TextEncoding
</span><a href="#local-6989586621679087098"><span class="hs-identifier hs-var">uft8Encoding</span></a></span><span> </span><span class="annot"><span class="annottext">TextEncoding
</span><a href="#local-6989586621679087099"><span class="hs-identifier hs-var">utf16Encoding</span></a></span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-254"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679087098"><span class="annot"><span class="annottext">TextEncoding
</span><a href="#local-6989586621679087098"><span class="hs-identifier hs-var">uft8Encoding</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679087099"><span class="annot"><span class="annottext">TextEncoding
</span><a href="#local-6989586621679087099"><span class="hs-identifier hs-var">utf16Encoding</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679087097"><span class="annot"><span class="annottext">Either EncodingException a -&gt; a
</span><a href="#local-6989586621679087097"><span class="hs-identifier hs-var">elimEx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TextEncoding, TextEncoding, Either EncodingException a -&gt; a)
forall a.
(TextEncoding, TextEncoding, Either EncodingException a -&gt; a)
</span><a href="FileSystem.Internal.html#utfEncodingsLenient"><span class="hs-identifier hs-var">Internal.utfEncodingsLenient</span></a></span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span class="hs-comment">-- | 'decode' that throws 'EncodingException'.</span><span>
</span><span id="line-257"></span><span class="hs-comment">--</span><span>
</span><span id="line-258"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-259"></span><span id="local-6989586621679086890"><span class="annot"><a href="FileSystem.OsPath.html#decodeThrowM"><span class="hs-identifier hs-type">decodeThrowM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679086890"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086890"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span></span><span>
</span><span id="line-260"></span><span id="decodeThrowM"><span class="annot"><span class="annottext">decodeThrowM :: forall (m :: * -&gt; *).
(HasCallStack, MonadThrow m) =&gt;
OsString -&gt; m String
</span><a href="FileSystem.OsPath.html#decodeThrowM"><span class="hs-identifier hs-var hs-var">decodeThrowM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-261"></span><span>  </span><span class="annot"><span class="annottext">OsString -&gt; Either EncodingException String
</span><a href="FileSystem.OsPath.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">(OsString -&gt; Either EncodingException String)
-&gt; (Either EncodingException String -&gt; m String)
-&gt; OsString
-&gt; m String
forall {k} (cat :: k -&gt; k -&gt; *) (a :: k) (b :: k) (c :: k).
Category cat =&gt;
cat a b -&gt; cat b c -&gt; cat a c
</span><span class="hs-operator hs-var">&gt;&gt;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-262"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679087110"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087110"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m String
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087110"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-263"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679087111"><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087111"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EncodingException -&gt; m String
forall e a. (HasCallStack, Exception e) =&gt; e -&gt; m a
forall (m :: * -&gt; *) e a.
(MonadThrow m, HasCallStack, Exception e) =&gt;
e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087111"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-264"></span><span class="hs-pragma">{-# INLINEABLE</span><span> </span><span class="annot"><a href="FileSystem.OsPath.html#decodeThrowM"><span class="hs-pragma hs-type">decodeThrowM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="hs-comment">-- | 'decode' with 'MonadFail'.</span><span>
</span><span id="line-267"></span><span class="hs-comment">--</span><span>
</span><span id="line-268"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-269"></span><span id="local-6989586621679086892"><span class="annot"><a href="FileSystem.OsPath.html#decodeFail"><span class="hs-identifier hs-type">decodeFail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadFail</span></span><span> </span><span class="annot"><a href="#local-6989586621679086892"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086892"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span></span><span>
</span><span id="line-270"></span><span id="decodeFail"><span class="annot"><span class="annottext">decodeFail :: forall (m :: * -&gt; *).
(HasCallStack, MonadFail m) =&gt;
OsString -&gt; m String
</span><a href="FileSystem.OsPath.html#decodeFail"><span class="hs-identifier hs-var hs-var">decodeFail</span></a></span></span><span> </span><span id="local-6989586621679087119"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087119"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; Either EncodingException String
</span><a href="FileSystem.OsPath.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087119"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-271"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679087120"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087120"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m String
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087120"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-272"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679087121"><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087121"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m String
forall a. String -&gt; m a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EncodingException -&gt; String
forall e. Exception e =&gt; e -&gt; String
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087121"><span class="hs-identifier hs-var">ex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span class="hs-pragma">{-# INLINEABLE</span><span> </span><span class="annot"><a href="FileSystem.OsPath.html#decodeFail"><span class="hs-pragma hs-type">decodeFail</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span class="hs-comment">-- | Total conversion from 'OsPath' to 'String'. If decoding fails, displays</span><span>
</span><span id="line-276"></span><span class="hs-comment">-- the exception.</span><span>
</span><span id="line-277"></span><span class="hs-comment">--</span><span>
</span><span id="line-278"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-279"></span><span class="annot"><a href="FileSystem.OsPath.html#decodeDisplayEx"><span class="hs-identifier hs-type">decodeDisplayEx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-280"></span><span id="decodeDisplayEx"><span class="annot"><span class="annottext">decodeDisplayEx :: OsString -&gt; String
</span><a href="FileSystem.OsPath.html#decodeDisplayEx"><span class="hs-identifier hs-var hs-var">decodeDisplayEx</span></a></span></span><span> </span><span id="local-6989586621679087122"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087122"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; Either EncodingException String
</span><a href="FileSystem.OsPath.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087122"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-281"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679087123"><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087123"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EncodingException -&gt; String
forall e. Exception e =&gt; e -&gt; String
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087123"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-282"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679087124"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087124"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087124"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span class="hs-comment">-- | Total conversion from 'OsPath' to 'String'. If decoding fails, falls back</span><span>
</span><span id="line-285"></span><span class="hs-comment">-- to its 'Show' instance.</span><span>
</span><span id="line-286"></span><span class="hs-comment">--</span><span>
</span><span id="line-287"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-288"></span><span class="annot"><a href="FileSystem.OsPath.html#decodeShow"><span class="hs-identifier hs-type">decodeShow</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-289"></span><span id="decodeShow"><span class="annot"><span class="annottext">decodeShow :: OsString -&gt; String
</span><a href="FileSystem.OsPath.html#decodeShow"><span class="hs-identifier hs-var hs-var">decodeShow</span></a></span></span><span> </span><span id="local-6989586621679087125"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087125"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; Either EncodingException String
</span><a href="FileSystem.OsPath.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087125"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-290"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><span class="annottext">EncodingException
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087125"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-291"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679087127"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087127"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087127"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span class="hs-comment">-- | Unsafely converts an 'OsPath' to a 'FilePath' falling back to 'error'.</span><span>
</span><span id="line-294"></span><span class="hs-comment">--</span><span>
</span><span id="line-295"></span><span class="hs-comment">-- __WARNING: Partial__</span><span>
</span><span id="line-296"></span><span class="hs-comment">--</span><span>
</span><span id="line-297"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-298"></span><span class="annot"><a href="FileSystem.OsPath.html#unsafeDecode"><span class="hs-identifier hs-type">unsafeDecode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-299"></span><span id="unsafeDecode"><span class="annot"><span class="annottext">unsafeDecode :: HasCallStack =&gt; OsString -&gt; String
</span><a href="FileSystem.OsPath.html#unsafeDecode"><span class="hs-identifier hs-var hs-var">unsafeDecode</span></a></span></span><span> </span><span id="local-6989586621679087132"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087132"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; Either EncodingException String
</span><a href="FileSystem.OsPath.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087132"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-300"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679087133"><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087133"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EncodingException -&gt; String
forall e. Exception e =&gt; e -&gt; String
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087133"><span class="hs-identifier hs-var">ex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679087134"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087134"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087134"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span class="annot"><a href="FileSystem.OsPath.html#validFpErr"><span class="hs-identifier hs-type">validFpErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-304"></span><span id="validFpErr"><span class="annot"><span class="annottext">validFpErr :: String -&gt; OsString -&gt; String
</span><a href="FileSystem.OsPath.html#validFpErr"><span class="hs-identifier hs-var hs-var">validFpErr</span></a></span></span><span> </span><span id="local-6989586621679087135"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087135"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span id="local-6989586621679087136"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087136"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-305"></span><span>  </span><span class="annot"><span class="annottext">[String] -&gt; String
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span>
</span><span id="line-306"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;FilePath '&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-307"></span><span>      </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087135"><span class="hs-identifier hs-var">fp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-308"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;' encoded as OsPath '&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-309"></span><span>      </span><span class="annot"><span class="annottext">OsString -&gt; String
</span><a href="FileSystem.OsPath.html#decodeLenient"><span class="hs-identifier hs-var">decodeLenient</span></a></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087136"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-310"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;' failed isValid&quot;</span></span><span>
</span><span id="line-311"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span class="annot"><a href="FileSystem.OsPath.html#validOsStrErr"><span class="hs-identifier hs-type">validOsStrErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-314"></span><span id="validOsStrErr"><span class="annot"><span class="annottext">validOsStrErr :: OsString -&gt; String
</span><a href="FileSystem.OsPath.html#validOsStrErr"><span class="hs-identifier hs-var hs-var">validOsStrErr</span></a></span></span><span> </span><span id="local-6989586621679087138"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087138"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-315"></span><span>  </span><span class="annot"><span class="annottext">[String] -&gt; String
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span>
</span><span id="line-316"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;OsString '&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-317"></span><span>      </span><span class="annot"><span class="annottext">OsString -&gt; String
</span><a href="FileSystem.OsPath.html#decodeLenient"><span class="hs-identifier hs-var">decodeLenient</span></a></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087138"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-318"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;' failed isValid&quot;</span></span><span>
</span><span id="line-319"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="hs-comment">-- | Unsafely combines an 'OsPath' and a 'FilePath' via (&lt;/&gt;) with</span><span>
</span><span id="line-322"></span><span class="hs-comment">-- 'unsafeEncode'.</span><span>
</span><span id="line-323"></span><span class="hs-comment">--</span><span>
</span><span id="line-324"></span><span class="hs-comment">-- __WARNING: Partial__</span><span>
</span><span id="line-325"></span><span class="hs-comment">--</span><span>
</span><span id="line-326"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-327"></span><span class="annot"><a href="FileSystem.OsPath.html#%3C%2F%3E%21"><span class="hs-operator hs-type">(&lt;/&gt;!)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span>
</span><span id="line-328"></span><span id="local-6989586621679087142"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087142"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="%3C%2F%3E%21"><span class="annot"><span class="annottext">&lt;/&gt;! :: HasCallStack =&gt; OsString -&gt; String -&gt; OsString
</span><a href="FileSystem.OsPath.html#%3C%2F%3E%21"><span class="hs-operator hs-var hs-var">&lt;/&gt;!</span></a></span></span><span> </span><span id="local-6989586621679087143"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087143"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087142"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">OsString -&gt; OsString -&gt; OsString
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; String -&gt; OsString
String -&gt; OsString
</span><a href="FileSystem.OsPath.html#unsafeEncode"><span class="hs-identifier hs-var">unsafeEncode</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679087143"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">9</span><span> </span><span class="annot"><a href="FileSystem.OsPath.html#%3C%2F%3E%21"><span class="hs-operator hs-type">&lt;/&gt;!</span></a></span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="hs-comment">-- | Unsafely combines a 'FilePath' and an 'OsPath' via (&lt;/&gt;) with</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- 'unsafeEncode'.</span><span>
</span><span id="line-334"></span><span class="hs-comment">--</span><span>
</span><span id="line-335"></span><span class="hs-comment">-- __WARNING: Partial__</span><span>
</span><span id="line-336"></span><span class="hs-comment">--</span><span>
</span><span id="line-337"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-338"></span><span class="annot"><a href="FileSystem.OsPath.html#%21%3C%2F%3E"><span class="hs-operator hs-type">(!&lt;/&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span>
</span><span id="line-339"></span><span id="%21%3C%2F%3E"><span class="annot"><span class="annottext">!&lt;/&gt; :: HasCallStack =&gt; String -&gt; OsString -&gt; OsString
</span><a href="FileSystem.OsPath.html#%21%3C%2F%3E"><span class="hs-operator hs-var hs-var">(!&lt;/&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(OsString -&gt; String -&gt; OsString) -&gt; String -&gt; OsString -&gt; OsString
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; OsString -&gt; String -&gt; OsString
OsString -&gt; String -&gt; OsString
</span><a href="FileSystem.OsPath.html#%3C%2F%3E%21"><span class="hs-operator hs-var">(&lt;/&gt;!)</span></a></span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">9</span><span> </span><span class="annot"><a href="FileSystem.OsPath.html#%21%3C%2F%3E"><span class="hs-operator hs-type">!&lt;/&gt;</span></a></span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span class="hs-comment">-- | Legacy alias for FilePaths' &lt;/&gt; operator. Exists because the &lt;/&gt; exported</span><span>
</span><span id="line-344"></span><span class="hs-comment">-- here is @'(&lt;/&gt;)' :: 'OsPath' -&gt; 'OsPath' -&gt; 'OsPath'@.</span><span>
</span><span id="line-345"></span><span class="hs-comment">--</span><span>
</span><span id="line-346"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-347"></span><span class="annot"><a href="FileSystem.OsPath.html#combineFilePaths"><span class="hs-identifier hs-type">combineFilePaths</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-348"></span><span id="combineFilePaths"><span class="annot"><span class="annottext">combineFilePaths :: String -&gt; String -&gt; String
</span><a href="FileSystem.OsPath.html#combineFilePaths"><span class="hs-identifier hs-var hs-var">combineFilePaths</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-operator hs-var">(FP.&lt;/&gt;)</span></span><span>
</span><span id="line-349"></span><span>
</span><span id="line-350"></span><span class="annot"><span class="hs-comment">-- | Exception for a path containing a tilde.</span></span><span>
</span><span id="line-351"></span><span class="hs-keyword">newtype</span><span> </span><span id="TildeException"><span class="annot"><a href="FileSystem.OsPath.html#TildeException"><span class="hs-identifier hs-var">TildeException</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MkTildeException"><span class="annot"><a href="FileSystem.OsPath.html#MkTildeException"><span class="hs-identifier hs-var">MkTildeException</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span>
</span><span id="line-352"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span>
</span><span id="line-353"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- | @since 0.1</span></span><span>
</span><span id="line-354"></span><span>      </span><span id="local-6989586621679087151"><span id="local-6989586621679087154"><span class="annot"><span class="annottext">TildeException -&gt; TildeException -&gt; Bool
(TildeException -&gt; TildeException -&gt; Bool)
-&gt; (TildeException -&gt; TildeException -&gt; Bool) -&gt; Eq TildeException
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TildeException -&gt; TildeException -&gt; Bool
== :: TildeException -&gt; TildeException -&gt; Bool
$c/= :: TildeException -&gt; TildeException -&gt; Bool
/= :: TildeException -&gt; TildeException -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span>
</span><span id="line-355"></span><span>      </span><span class="annot"><span class="hs-comment">-- | @since 0.1</span></span><span>
</span><span id="line-356"></span><span>      </span><span id="local-6989586621679087159"><span id="local-6989586621679087161"><span class="annot"><span class="annottext">(forall x. TildeException -&gt; Rep TildeException x)
-&gt; (forall x. Rep TildeException x -&gt; TildeException)
-&gt; Generic TildeException
forall x. Rep TildeException x -&gt; TildeException
forall x. TildeException -&gt; Rep TildeException x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. TildeException -&gt; Rep TildeException x
from :: forall x. TildeException -&gt; Rep TildeException x
$cto :: forall x. Rep TildeException x -&gt; TildeException
to :: forall x. Rep TildeException x -&gt; TildeException
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span>
</span><span id="line-357"></span><span>      </span><span class="annot"><span class="hs-comment">-- | @since 0.1</span></span><span>
</span><span id="line-358"></span><span>      </span><span id="local-6989586621679087167"><span id="local-6989586621679087172"><span id="local-6989586621679087176"><span class="annot"><span class="annottext">Int -&gt; TildeException -&gt; String -&gt; String
[TildeException] -&gt; String -&gt; String
TildeException -&gt; String
(Int -&gt; TildeException -&gt; String -&gt; String)
-&gt; (TildeException -&gt; String)
-&gt; ([TildeException] -&gt; String -&gt; String)
-&gt; Show TildeException
forall a.
(Int -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
$cshowsPrec :: Int -&gt; TildeException -&gt; String -&gt; String
showsPrec :: Int -&gt; TildeException -&gt; String -&gt; String
$cshow :: TildeException -&gt; String
show :: TildeException -&gt; String
$cshowList :: [TildeException] -&gt; String -&gt; String
showList :: [TildeException] -&gt; String -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span>
</span><span id="line-359"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-360"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span>
</span><span id="line-361"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- | @since 0.1</span></span><span>
</span><span id="line-362"></span><span>      </span><span id="local-6989586621679087181"><span class="annot"><span class="annottext">TildeException -&gt; ()
(TildeException -&gt; ()) -&gt; NFData TildeException
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: TildeException -&gt; ()
rnf :: TildeException -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span>
</span><span id="line-363"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span class="annot"><span class="hs-comment">-- | @since 0.1</span></span><span>
</span><span id="line-366"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679087200"><span id="local-6989586621679087204"><span id="local-6989586621679087208"><span class="annot"><span class="hs-identifier hs-type">Exception</span></span><span> </span><span class="annot"><a href="FileSystem.OsPath.html#TildeException"><span class="hs-identifier hs-type">TildeException</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-367"></span><span>  </span><span id="local-6989586621679087214"><span class="annot"><span class="annottext">displayException :: TildeException -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var">displayException</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FileSystem.OsPath.html#MkTildeException"><span class="hs-identifier hs-type">MkTildeException</span></a></span><span> </span><span id="local-6989586621679087215"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087215"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-368"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unexpected tilde in OsPath: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">OsString -&gt; String
</span><a href="FileSystem.OsPath.html#decodeLenient"><span class="hs-identifier hs-var">decodeLenient</span></a></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087215"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span class="annot"><span class="hs-comment">-- | Represents the &quot;tilde state&quot; for a given path.</span></span><span>
</span><span id="line-371"></span><span class="hs-keyword">data</span><span> </span><span id="TildePrefixState"><span class="annot"><a href="FileSystem.OsPath.html#TildePrefixState"><span class="hs-identifier hs-var">TildePrefixState</span></a></span></span><span>
</span><span id="line-372"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-comment">-- | The path contained no tilde prefix.</span></span><span>
</span><span id="line-373"></span><span>    </span><span id="TildePrefixStateNone"><span class="annot"><a href="FileSystem.OsPath.html#TildePrefixStateNone"><span class="hs-identifier hs-var">TildePrefixStateNone</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span>
</span><span id="line-374"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | The path contained &quot;tilde prefix(es)&quot; e.g. @~/@ or @~\\ (windows only)@,</span><span>
</span><span id="line-375"></span><span>    </span><span class="hs-comment">-- which have been stripped. The result can be empty, however.</span><span>
</span><span id="line-376"></span><span>    </span><span id="TildePrefixStateStripped"><span class="annot"><a href="FileSystem.OsPath.html#TildePrefixStateStripped"><span class="hs-identifier hs-var">TildePrefixStateStripped</span></a></span></span><span> </span><span class="annot"><a href="FileSystem.OsPath.html#OsPathOrEmpty"><span class="hs-identifier hs-type">OsPathOrEmpty</span></a></span><span>
</span><span id="line-377"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span>
</span><span id="line-378"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- | @since 0.1</span></span><span>
</span><span id="line-379"></span><span>      </span><span id="local-6989586621679087219"><span id="local-6989586621679087227"><span class="annot"><span class="annottext">TildePrefixState -&gt; TildePrefixState -&gt; Bool
(TildePrefixState -&gt; TildePrefixState -&gt; Bool)
-&gt; (TildePrefixState -&gt; TildePrefixState -&gt; Bool)
-&gt; Eq TildePrefixState
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TildePrefixState -&gt; TildePrefixState -&gt; Bool
== :: TildePrefixState -&gt; TildePrefixState -&gt; Bool
$c/= :: TildePrefixState -&gt; TildePrefixState -&gt; Bool
/= :: TildePrefixState -&gt; TildePrefixState -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span>
</span><span id="line-380"></span><span>      </span><span class="annot"><span class="hs-comment">-- | @since 0.1</span></span><span>
</span><span id="line-381"></span><span>      </span><span id="local-6989586621679087231"><span id="local-6989586621679087233"><span class="annot"><span class="annottext">(forall x. TildePrefixState -&gt; Rep TildePrefixState x)
-&gt; (forall x. Rep TildePrefixState x -&gt; TildePrefixState)
-&gt; Generic TildePrefixState
forall x. Rep TildePrefixState x -&gt; TildePrefixState
forall x. TildePrefixState -&gt; Rep TildePrefixState x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. TildePrefixState -&gt; Rep TildePrefixState x
from :: forall x. TildePrefixState -&gt; Rep TildePrefixState x
$cto :: forall x. Rep TildePrefixState x -&gt; TildePrefixState
to :: forall x. Rep TildePrefixState x -&gt; TildePrefixState
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span>
</span><span id="line-382"></span><span>      </span><span class="annot"><span class="hs-comment">-- | @since 0.1</span></span><span>
</span><span id="line-383"></span><span>      </span><span id="local-6989586621679087236"><span id="local-6989586621679087243"><span id="local-6989586621679087247"><span class="annot"><span class="annottext">Int -&gt; TildePrefixState -&gt; String -&gt; String
[TildePrefixState] -&gt; String -&gt; String
TildePrefixState -&gt; String
(Int -&gt; TildePrefixState -&gt; String -&gt; String)
-&gt; (TildePrefixState -&gt; String)
-&gt; ([TildePrefixState] -&gt; String -&gt; String)
-&gt; Show TildePrefixState
forall a.
(Int -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
$cshowsPrec :: Int -&gt; TildePrefixState -&gt; String -&gt; String
showsPrec :: Int -&gt; TildePrefixState -&gt; String -&gt; String
$cshow :: TildePrefixState -&gt; String
show :: TildePrefixState -&gt; String
$cshowList :: [TildePrefixState] -&gt; String -&gt; String
showList :: [TildePrefixState] -&gt; String -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span>
</span><span id="line-384"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span>
</span><span id="line-386"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- | @since 0.1</span></span><span>
</span><span id="line-387"></span><span>      </span><span id="local-6989586621679087250"><span class="annot"><span class="annottext">TildePrefixState -&gt; ()
(TildePrefixState -&gt; ()) -&gt; NFData TildePrefixState
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: TildePrefixState -&gt; ()
rnf :: TildePrefixState -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span>
</span><span id="line-388"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span class="hs-comment">-- | Retrieves the path's &quot;tilde state&quot;. Strips consecutive &quot;tilde prefixes&quot;</span><span>
</span><span id="line-391"></span><span class="hs-comment">-- if they exist. If the string contains no prefixes, returns it unchanged.</span><span>
</span><span id="line-392"></span><span class="hs-comment">--</span><span>
</span><span id="line-393"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-394"></span><span class="annot"><a href="FileSystem.OsPath.html#toTildePrefixState"><span class="hs-identifier hs-type">toTildePrefixState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="FileSystem.OsPath.html#TildePrefixState"><span class="hs-identifier hs-type">TildePrefixState</span></a></span><span>
</span><span id="line-395"></span><span id="toTildePrefixState"><span class="annot"><span class="annottext">toTildePrefixState :: OsString -&gt; TildePrefixState
</span><a href="FileSystem.OsPath.html#toTildePrefixState"><span class="hs-identifier hs-var hs-var">toTildePrefixState</span></a></span></span><span> </span><span id="local-6989586621679087267"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087267"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-396"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; Maybe OsPathOrEmpty
</span><a href="FileSystem.OsPath.html#stripTildePrefixes"><span class="hs-identifier hs-var">stripTildePrefixes</span></a></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087267"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-397"></span><span>    </span><span class="hs-comment">-- No leading tilde; check original string.</span><span>
</span><span id="line-398"></span><span>    </span><span class="annot"><span class="annottext">Maybe OsPathOrEmpty
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; TildePrefixState
</span><a href="FileSystem.OsPath.html#TildePrefixStateNone"><span class="hs-identifier hs-var">TildePrefixStateNone</span></a></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087267"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-399"></span><span>    </span><span class="hs-comment">-- Leading tilde produced empty string; fine, nothing else to check.</span><span>
</span><span id="line-400"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">OsPathOrEmpty
</span><a href="FileSystem.OsPath.html#OsPathEmpty"><span class="hs-identifier hs-var">OsPathEmpty</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OsPathOrEmpty -&gt; TildePrefixState
</span><a href="FileSystem.OsPath.html#TildePrefixStateStripped"><span class="hs-identifier hs-var">TildePrefixStateStripped</span></a></span><span> </span><span class="annot"><span class="annottext">OsPathOrEmpty
</span><a href="FileSystem.OsPath.html#OsPathEmpty"><span class="hs-identifier hs-var">OsPathEmpty</span></a></span><span>
</span><span id="line-401"></span><span>    </span><span class="hs-comment">-- Leading tilde w/ non-empty stripped; check stripped.</span><span>
</span><span id="line-402"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="FileSystem.OsPath.html#OsPathNonEmpty"><span class="hs-identifier hs-type">OsPathNonEmpty</span></a></span><span> </span><span id="local-6989586621679087271"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087271"><span class="hs-identifier hs-var">p'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OsPathOrEmpty -&gt; TildePrefixState
</span><a href="FileSystem.OsPath.html#TildePrefixStateStripped"><span class="hs-identifier hs-var">TildePrefixStateStripped</span></a></span><span> </span><span class="annot"><span class="annottext">(OsPathOrEmpty -&gt; TildePrefixState)
-&gt; (OsString -&gt; OsPathOrEmpty) -&gt; OsString -&gt; TildePrefixState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">OsString -&gt; OsPathOrEmpty
</span><a href="FileSystem.OsPath.html#OsPathNonEmpty"><span class="hs-identifier hs-var">OsPathNonEmpty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087271"><span class="hs-identifier hs-var">p'</span></a></span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span class="hs-comment">-- | Sum type representing a possible empty OsPath. The 'OsPath' type _can_</span><span>
</span><span id="line-405"></span><span class="hs-comment">-- be empty, hence 'OsPathNonEmpty' should only be used when the 'OsPath'</span><span>
</span><span id="line-406"></span><span class="hs-comment">-- has been verified first. This type really exists to make it clear when</span><span>
</span><span id="line-407"></span><span class="hs-comment">-- the empty distinction matters.</span><span>
</span><span id="line-408"></span><span class="hs-comment">--</span><span>
</span><span id="line-409"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-410"></span><span class="hs-keyword">data</span><span> </span><span id="OsPathOrEmpty"><span class="annot"><a href="FileSystem.OsPath.html#OsPathOrEmpty"><span class="hs-identifier hs-var">OsPathOrEmpty</span></a></span></span><span>
</span><span id="line-411"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | OsPath is empty.</span><span>
</span><span id="line-412"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-413"></span><span>    </span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-414"></span><span>    </span><span id="OsPathEmpty"><span class="annot"><a href="FileSystem.OsPath.html#OsPathEmpty"><span class="hs-identifier hs-var">OsPathEmpty</span></a></span></span><span>
</span><span id="line-415"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | OsPath is non-empty.</span><span>
</span><span id="line-416"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-417"></span><span>    </span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-418"></span><span>    </span><span id="OsPathNonEmpty"><span class="annot"><a href="FileSystem.OsPath.html#OsPathNonEmpty"><span class="hs-identifier hs-var">OsPathNonEmpty</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span>
</span><span id="line-419"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span>
</span><span id="line-420"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- | @since 0.1</span></span><span>
</span><span id="line-421"></span><span>      </span><span id="local-6989586621679087273"><span id="local-6989586621679087278"><span class="annot"><span class="annottext">OsPathOrEmpty -&gt; OsPathOrEmpty -&gt; Bool
(OsPathOrEmpty -&gt; OsPathOrEmpty -&gt; Bool)
-&gt; (OsPathOrEmpty -&gt; OsPathOrEmpty -&gt; Bool) -&gt; Eq OsPathOrEmpty
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: OsPathOrEmpty -&gt; OsPathOrEmpty -&gt; Bool
== :: OsPathOrEmpty -&gt; OsPathOrEmpty -&gt; Bool
$c/= :: OsPathOrEmpty -&gt; OsPathOrEmpty -&gt; Bool
/= :: OsPathOrEmpty -&gt; OsPathOrEmpty -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span>
</span><span id="line-422"></span><span>      </span><span class="annot"><span class="hs-comment">-- | @since 0.1</span></span><span>
</span><span id="line-423"></span><span>      </span><span id="local-6989586621679087281"><span id="local-6989586621679087283"><span class="annot"><span class="annottext">(forall x. OsPathOrEmpty -&gt; Rep OsPathOrEmpty x)
-&gt; (forall x. Rep OsPathOrEmpty x -&gt; OsPathOrEmpty)
-&gt; Generic OsPathOrEmpty
forall x. Rep OsPathOrEmpty x -&gt; OsPathOrEmpty
forall x. OsPathOrEmpty -&gt; Rep OsPathOrEmpty x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. OsPathOrEmpty -&gt; Rep OsPathOrEmpty x
from :: forall x. OsPathOrEmpty -&gt; Rep OsPathOrEmpty x
$cto :: forall x. Rep OsPathOrEmpty x -&gt; OsPathOrEmpty
to :: forall x. Rep OsPathOrEmpty x -&gt; OsPathOrEmpty
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span>
</span><span id="line-424"></span><span>      </span><span class="annot"><span class="hs-comment">-- | @since 0.1</span></span><span>
</span><span id="line-425"></span><span>      </span><span id="local-6989586621679087286"><span id="local-6989586621679087290"><span id="local-6989586621679087293"><span class="annot"><span class="annottext">Int -&gt; OsPathOrEmpty -&gt; String -&gt; String
[OsPathOrEmpty] -&gt; String -&gt; String
OsPathOrEmpty -&gt; String
(Int -&gt; OsPathOrEmpty -&gt; String -&gt; String)
-&gt; (OsPathOrEmpty -&gt; String)
-&gt; ([OsPathOrEmpty] -&gt; String -&gt; String)
-&gt; Show OsPathOrEmpty
forall a.
(Int -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
$cshowsPrec :: Int -&gt; OsPathOrEmpty -&gt; String -&gt; String
showsPrec :: Int -&gt; OsPathOrEmpty -&gt; String -&gt; String
$cshow :: OsPathOrEmpty -&gt; String
show :: OsPathOrEmpty -&gt; String
$cshowList :: [OsPathOrEmpty] -&gt; String -&gt; String
showList :: [OsPathOrEmpty] -&gt; String -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span>
</span><span id="line-426"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-427"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span>
</span><span id="line-428"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- | @since 0.1</span></span><span>
</span><span id="line-429"></span><span>      </span><span id="local-6989586621679087296"><span class="annot"><span class="annottext">OsPathOrEmpty -&gt; ()
(OsPathOrEmpty -&gt; ()) -&gt; NFData OsPathOrEmpty
forall a. (a -&gt; ()) -&gt; NFData a
$crnf :: OsPathOrEmpty -&gt; ()
rnf :: OsPathOrEmpty -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></span></span><span>
</span><span id="line-430"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span class="hs-comment">-- | Returns true iff the string has a tilde prefix.</span><span>
</span><span id="line-433"></span><span class="hs-comment">--</span><span>
</span><span id="line-434"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-435"></span><span class="annot"><a href="FileSystem.OsPath.html#containsTildePrefix"><span class="hs-identifier hs-type">containsTildePrefix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-436"></span><span id="containsTildePrefix"><span class="annot"><span class="annottext">containsTildePrefix :: OsString -&gt; Bool
</span><a href="FileSystem.OsPath.html#containsTildePrefix"><span class="hs-identifier hs-var hs-var">containsTildePrefix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe OsPathOrEmpty -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe OsPathOrEmpty -&gt; Bool)
-&gt; (OsString -&gt; Maybe OsPathOrEmpty) -&gt; OsString -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">OsString -&gt; Maybe OsPathOrEmpty
</span><a href="FileSystem.OsPath.html#stripTildePrefixes"><span class="hs-identifier hs-var">stripTildePrefixes</span></a></span><span>
</span><span id="line-437"></span><span>
</span><span id="line-438"></span><span class="hs-comment">-- | Strip tilde prefix of path @p@, returning @Just p'@ if @p@ was stripped.</span><span>
</span><span id="line-439"></span><span class="hs-comment">-- On unix, strips @~/@. On windows, attempts to strip the same @~/@.</span><span>
</span><span id="line-440"></span><span class="hs-comment">-- If that was unsuccessful, then attempts @~\\@.</span><span>
</span><span id="line-441"></span><span class="hs-comment">--</span><span>
</span><span id="line-442"></span><span class="hs-comment">-- Note that this can return an empty OsPath if the parameter is one of</span><span>
</span><span id="line-443"></span><span class="hs-comment">-- @&quot;~/&quot;@, @&quot;~&quot;@, or @&quot;~\\&quot;@ (windows only).</span><span>
</span><span id="line-444"></span><span class="hs-comment">--</span><span>
</span><span id="line-445"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-446"></span><span class="annot"><a href="FileSystem.OsPath.html#stripTildePrefixes"><span class="hs-identifier hs-type">stripTildePrefixes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="FileSystem.OsPath.html#OsPathOrEmpty"><span class="hs-identifier hs-type">OsPathOrEmpty</span></a></span><span>
</span><span id="line-447"></span><span id="stripTildePrefixes"><span class="annot"><span class="annottext">stripTildePrefixes :: OsString -&gt; Maybe OsPathOrEmpty
</span><a href="FileSystem.OsPath.html#stripTildePrefixes"><span class="hs-identifier hs-var hs-var">stripTildePrefixes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-448"></span><span>  </span><span class="annot"><span class="annottext">(OsString -&gt; OsPathOrEmpty)
-&gt; Maybe OsString -&gt; Maybe OsPathOrEmpty
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">OsString -&gt; OsPathOrEmpty
</span><a href="#local-6989586621679087309"><span class="hs-identifier hs-var">toStripped</span></a></span><span>
</span><span id="line-449"></span><span>    </span><span class="annot"><span class="annottext">(Maybe OsString -&gt; Maybe OsPathOrEmpty)
-&gt; (OsString -&gt; Maybe OsString) -&gt; OsString -&gt; Maybe OsPathOrEmpty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TildePrefixes -&gt; OsString -&gt; Maybe OsString
</span><a href="FileSystem.Internal.html#stripTildePrefixes"><span class="hs-identifier hs-var">Internal.stripTildePrefixes</span></a></span><span> </span><span class="annot"><span class="annottext">TildePrefixes
</span><a href="FileSystem.OsPath.html#tildePrefixes"><span class="hs-identifier hs-var">tildePrefixes</span></a></span><span>
</span><span id="line-450"></span><span>    </span><span class="annot"><span class="annottext">(OsString -&gt; Maybe OsString)
-&gt; (OsString -&gt; OsString) -&gt; OsString -&gt; Maybe OsString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">OsString -&gt; OsString
</span><a href="FileSystem.OsPath.html#toOsString"><span class="hs-identifier hs-var">toOsString</span></a></span><span>
</span><span id="line-451"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-452"></span><span>    </span><span class="hs-comment">-- NOTE: This is predicated on the belief that stripping a prefix does not</span><span>
</span><span id="line-453"></span><span>    </span><span class="hs-comment">-- change the validity. In particular, stripping a prefix cannot change a</span><span>
</span><span id="line-454"></span><span>    </span><span class="hs-comment">-- valid path to an invalid path. There is one exception to this: A path</span><span>
</span><span id="line-455"></span><span>    </span><span class="hs-comment">-- that _only_ contains the tilde prefix e.g. &quot;~/&quot;. This will produce an</span><span>
</span><span id="line-456"></span><span>    </span><span class="hs-comment">-- empty string which is _not_ valid.</span><span>
</span><span id="line-457"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-458"></span><span>    </span><span class="hs-comment">-- We want to allow this, however, because downstream functions will want</span><span>
</span><span id="line-459"></span><span>    </span><span class="hs-comment">-- to turn an empty path into the plain home directory. Hence we should</span><span>
</span><span id="line-460"></span><span>    </span><span class="hs-comment">-- __not__ check validity here, which is okay as long as this is the only</span><span>
</span><span id="line-461"></span><span>    </span><span class="hs-comment">-- instance of &quot;introduced invalidity&quot;.</span><span>
</span><span id="line-462"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-463"></span><span>    </span><span class="hs-comment">-- We should strongly signal that the result can be empty, hence OsPathOrEmpty.</span><span>
</span><span id="line-464"></span><span>    </span><span class="annot"><a href="#local-6989586621679087309"><span class="hs-identifier hs-type">toStripped</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="FileSystem.OsPath.html#OsPathOrEmpty"><span class="hs-identifier hs-type">OsPathOrEmpty</span></a></span><span>
</span><span id="line-465"></span><span>    </span><span id="local-6989586621679087309"><span class="annot"><span class="annottext">toStripped :: OsString -&gt; OsPathOrEmpty
</span><a href="#local-6989586621679087309"><span class="hs-identifier hs-var hs-var">toStripped</span></a></span></span><span> </span><span id="local-6989586621679087312"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087312"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-466"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087312"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">OsString -&gt; OsString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">OsString
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-467"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">OsPathOrEmpty
</span><a href="FileSystem.OsPath.html#OsPathEmpty"><span class="hs-identifier hs-var">OsPathEmpty</span></a></span><span>
</span><span id="line-468"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; OsPathOrEmpty
</span><a href="FileSystem.OsPath.html#OsPathNonEmpty"><span class="hs-identifier hs-var">OsPathNonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OsString -&gt; OsString
</span><a href="FileSystem.OsPath.html#reallyUnsafeFromOsString"><span class="hs-identifier hs-var">reallyUnsafeFromOsString</span></a></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087312"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-469"></span><span>
</span><span id="line-470"></span><span class="annot"><a href="FileSystem.OsPath.html#tildePrefixes"><span class="hs-identifier hs-type">tildePrefixes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="FileSystem.Internal.html#TildePrefixes"><span class="hs-identifier hs-type">TildePrefixes</span></a></span><span>
</span><span id="line-471"></span><span id="tildePrefixes"><span class="annot"><span class="annottext">tildePrefixes :: TildePrefixes
</span><a href="FileSystem.OsPath.html#tildePrefixes"><span class="hs-identifier hs-var hs-var">tildePrefixes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OsString -&gt; OsString
</span><a href="FileSystem.OsPath.html#toOsString"><span class="hs-identifier hs-var">toOsString</span></a></span><span> </span><span class="annot"><span class="">[osp|~/|]</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; OsString
</span><a href="FileSystem.OsPath.html#toOsString"><span class="hs-identifier hs-var">toOsString</span></a></span><span> </span><span class="annot"><span class="">[osp|~\|]</span></span><span class="hs-special">)</span><span>
</span><span id="line-472"></span><span>
</span><span id="line-473"></span><span class="hs-comment">-- | Convert an 'OsPath' to 'OsString'. This is currently the identity</span><span>
</span><span id="line-474"></span><span class="hs-comment">-- function.</span><span>
</span><span id="line-475"></span><span class="hs-comment">--</span><span>
</span><span id="line-476"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-477"></span><span class="annot"><a href="FileSystem.OsPath.html#toOsString"><span class="hs-identifier hs-type">toOsString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsString</span></span><span>
</span><span id="line-478"></span><span id="toOsString"><span class="annot"><span class="annottext">toOsString :: OsString -&gt; OsString
</span><a href="FileSystem.OsPath.html#toOsString"><span class="hs-identifier hs-var hs-var">toOsString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; OsString
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-479"></span><span>
</span><span id="line-480"></span><span class="hs-comment">-- | Convert an 'OsString' to 'OsPath'. Currently this merely checks</span><span>
</span><span id="line-481"></span><span class="hs-comment">-- 'OsPath.isValid'.</span><span>
</span><span id="line-482"></span><span class="hs-comment">--</span><span>
</span><span id="line-483"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-484"></span><span class="annot"><a href="FileSystem.OsPath.html#fromOsString"><span class="hs-identifier hs-type">fromOsString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EncodingException</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span>
</span><span id="line-485"></span><span id="fromOsString"><span class="annot"><span class="annottext">fromOsString :: OsString -&gt; Either EncodingException OsString
</span><a href="FileSystem.OsPath.html#fromOsString"><span class="hs-identifier hs-var hs-var">fromOsString</span></a></span></span><span> </span><span id="local-6989586621679087317"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087317"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-486"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; Bool
</span><span class="hs-identifier hs-var">OsP.isValid</span></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087317"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-487"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; Either EncodingException OsString
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087317"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-488"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">EncodingException -&gt; Either EncodingException OsString
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Maybe Word8 -&gt; EncodingException
</span><span class="hs-identifier hs-var">EncodingError</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OsString -&gt; String
</span><a href="FileSystem.OsPath.html#validOsStrErr"><span class="hs-identifier hs-var">validOsStrErr</span></a></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087317"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Word8
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span class="hs-comment">-- | 'fromOsString' that throws the 'EncodingException'.</span><span>
</span><span id="line-491"></span><span class="hs-comment">--</span><span>
</span><span id="line-492"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-493"></span><span id="local-6989586621679086937"><span class="annot"><a href="FileSystem.OsPath.html#fromOsStringThrowM"><span class="hs-identifier hs-type">fromOsStringThrowM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679086937"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086937"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span></span><span>
</span><span id="line-494"></span><span id="fromOsStringThrowM"><span class="annot"><span class="annottext">fromOsStringThrowM :: forall (m :: * -&gt; *).
(HasCallStack, MonadThrow m) =&gt;
OsString -&gt; m OsString
</span><a href="FileSystem.OsPath.html#fromOsStringThrowM"><span class="hs-identifier hs-var hs-var">fromOsStringThrowM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-495"></span><span>  </span><span class="annot"><span class="annottext">OsString -&gt; Either EncodingException OsString
</span><a href="FileSystem.OsPath.html#fromOsString"><span class="hs-identifier hs-var">fromOsString</span></a></span><span> </span><span class="annot"><span class="annottext">(OsString -&gt; Either EncodingException OsString)
-&gt; (Either EncodingException OsString -&gt; m OsString)
-&gt; OsString
-&gt; m OsString
forall {k} (cat :: k -&gt; k -&gt; *) (a :: k) (b :: k) (c :: k).
Category cat =&gt;
cat a b -&gt; cat b c -&gt; cat a c
</span><span class="hs-operator hs-var">&gt;&gt;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-496"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679087328"><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087328"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EncodingException -&gt; m OsString
forall e a. (HasCallStack, Exception e) =&gt; e -&gt; m a
forall (m :: * -&gt; *) e a.
(MonadThrow m, HasCallStack, Exception e) =&gt;
e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087328"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-497"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679087329"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087329"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; m OsString
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087329"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span class="hs-comment">-- | 'fromOsString' for 'MonadFail'.</span><span>
</span><span id="line-500"></span><span class="hs-comment">--</span><span>
</span><span id="line-501"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-502"></span><span id="local-6989586621679086939"><span class="annot"><a href="FileSystem.OsPath.html#fromOsStringFail"><span class="hs-identifier hs-type">fromOsStringFail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadFail</span></span><span> </span><span class="annot"><a href="#local-6989586621679086939"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679086939"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span></span><span>
</span><span id="line-503"></span><span id="fromOsStringFail"><span class="annot"><span class="annottext">fromOsStringFail :: forall (m :: * -&gt; *).
(HasCallStack, MonadFail m) =&gt;
OsString -&gt; m OsString
</span><a href="FileSystem.OsPath.html#fromOsStringFail"><span class="hs-identifier hs-var hs-var">fromOsStringFail</span></a></span></span><span> </span><span id="local-6989586621679087337"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087337"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; Either EncodingException OsString
</span><a href="FileSystem.OsPath.html#fromOsString"><span class="hs-identifier hs-var">fromOsString</span></a></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087337"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-504"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679087338"><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087338"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m OsString
forall a. String -&gt; m a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m OsString) -&gt; String -&gt; m OsString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EncodingException -&gt; String
forall e. Exception e =&gt; e -&gt; String
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087338"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-505"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679087339"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087339"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; m OsString
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087339"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-506"></span><span>
</span><span id="line-507"></span><span class="hs-comment">-- | Unsafely checks an 'OsString' for validity, dying with 'error' on</span><span>
</span><span id="line-508"></span><span class="hs-comment">-- failure.</span><span>
</span><span id="line-509"></span><span class="hs-comment">--</span><span>
</span><span id="line-510"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-511"></span><span class="annot"><a href="FileSystem.OsPath.html#unsafeFromOsString"><span class="hs-identifier hs-type">unsafeFromOsString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span>
</span><span id="line-512"></span><span id="unsafeFromOsString"><span class="annot"><span class="annottext">unsafeFromOsString :: HasCallStack =&gt; OsString -&gt; OsString
</span><a href="FileSystem.OsPath.html#unsafeFromOsString"><span class="hs-identifier hs-var hs-var">unsafeFromOsString</span></a></span></span><span> </span><span id="local-6989586621679087344"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087344"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; Either EncodingException OsString
</span><a href="FileSystem.OsPath.html#fromOsString"><span class="hs-identifier hs-var">fromOsString</span></a></span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087344"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-513"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679087345"><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087345"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; OsString
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; OsString) -&gt; String -&gt; OsString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EncodingException -&gt; String
forall e. Exception e =&gt; e -&gt; String
</span><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="annot"><span class="annottext">EncodingException
</span><a href="#local-6989586621679087345"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-514"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679087346"><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087346"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OsString
</span><a href="#local-6989586621679087346"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-515"></span><span>
</span><span id="line-516"></span><span class="hs-comment">-- | &quot;Converts&quot; from 'OsString' to 'OsPath' without checking any invariants.</span><span>
</span><span id="line-517"></span><span class="hs-comment">-- Used for when we know an operator cannot have</span><span>
</span><span id="line-518"></span><span class="hs-comment">--</span><span>
</span><span id="line-519"></span><span class="hs-comment">-- @since 0.1</span><span>
</span><span id="line-520"></span><span class="annot"><a href="FileSystem.OsPath.html#reallyUnsafeFromOsString"><span class="hs-identifier hs-type">reallyUnsafeFromOsString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span><span>
</span><span id="line-521"></span><span id="reallyUnsafeFromOsString"><span class="annot"><span class="annottext">reallyUnsafeFromOsString :: OsString -&gt; OsString
</span><a href="FileSystem.OsPath.html#reallyUnsafeFromOsString"><span class="hs-identifier hs-var hs-var">reallyUnsafeFromOsString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OsString -&gt; OsString
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-522"></span></pre></body></html>